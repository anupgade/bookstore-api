Started GET "/" for ::1 at 2022-06-04 11:42:36 -0500
  [1m[35m (1.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.5) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.5) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/favicon.ico" for ::1 at 2022-06-04 11:42:36 -0500
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.5) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.5) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for ::1 at 2022-06-04 11:43:03 -0500
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.5) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.5) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/favicon.ico" for ::1 at 2022-06-04 11:43:03 -0500
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.5) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.5) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/favicon.ico" for ::1 at 2022-06-04 11:43:12 -0500
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.5) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.5) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "password_digest" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185636"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" varchar, "category" varchar, "user_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_bc582ddd02"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE  INDEX "index_books_on_user_id" ON "books" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185712"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateFavourites (20200831185743)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "book_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_3073f88368"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a08454283e"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE  INDEX "index_favourites_on_user_id" ON "favourites" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE  INDEX "index_favourites_on_book_id" ON "favourites" ("book_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185743"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "admin" boolean DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200907184308"]]
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-04 16:44:32.061585"], ["updated_at", "2022-06-04 16:44:32.061585"]]
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2022-06-04 11:44:44 -0500
  [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StaticController#home as HTML
  Rendering layouts/home.html.erb within layouts/static
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/data/_users.html.erb:13
  Rendered data/_users.html.erb (Duration: 16.4ms | Allocations: 3897)
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  ↳ app/views/data/_books.html.erb:13
  Rendered data/_books.html.erb (Duration: 8.4ms | Allocations: 3242)
  [1m[36mFavourite Load (0.1ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites"[0m
  ↳ app/views/data/_favourites.html.erb:11
  Rendered data/_favourites.html.erb (Duration: 8.9ms | Allocations: 1701)
  Rendered layouts/home.html.erb within layouts/static (Duration: 36.9ms | Allocations: 9674)
  Rendered layouts/_rails_default.erb (Duration: 1317.1ms | Allocations: 42841)
  Rendered layouts/_shim.html.erb (Duration: 0.3ms | Allocations: 80)
  Rendered layouts/_header.html.erb (Duration: 0.3ms | Allocations: 94)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 80)
Completed 200 OK in 1381ms (Views: 1370.3ms | ActiveRecord: 0.8ms | Allocations: 56352)


Started GET "/assets/static-ca9fc0f6e57d50e738e14612acb8884f5a0a1a9a1af7bcba30b60ae980823003.css" for ::1 at 2022-06-04 11:44:45 -0500
Started GET "/favicon.ico" for ::1 at 2022-06-04 11:44:45 -0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/books" for ::1 at 2022-06-04 11:44:52 -0500
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 94ms (ActiveRecord: 0.0ms | Allocations: 79908)


  
NameError (undefined local variable or method `current_user' for #<BooksController:0x0000000109285ca8>):
  
app/controllers/books_controller.rb:8:in `index'
Started GET "/users" for ::1 at 2022-06-04 11:45:01 -0500
  
ActionController::RoutingError (No route matches [GET] "/users"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/user" for ::1 at 2022-06-04 11:45:06 -0500
  
ActionController::RoutingError (No route matches [GET] "/user"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/book" for ::1 at 2022-06-04 11:45:23 -0500
  
ActionController::RoutingError (No route matches [GET] "/book"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/books" for ::1 at 2022-06-04 11:45:25 -0500
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 73ms (ActiveRecord: 0.0ms | Allocations: 79815)


  
NameError (undefined local variable or method `current_user' for #<BooksController:0x0000000109130718>):
  
app/controllers/books_controller.rb:8:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "firmo@viize.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at", "admin") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "firmo holanda"], ["email", "firmo@viize.com"], ["password_digest", "$2a$12$wbUwaqIcXUSNcw0P65dvMO752BjLd0Z/5.Jzh2ciGh1nInNcdZ82O"], ["created_at", "2022-06-04 16:46:00.073931"], ["updated_at", "2022-06-04 16:46:00.073931"], ["admin", 1]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "example-1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "rep. reta runolfsson"], ["email", "example-1@example.com"], ["password_digest", "$2a$12$cBNLcPuWMHOSifQqWUioMOgrB3y.9rp32OUUBPntO8lsm1FGsEJ.e"], ["created_at", "2022-06-04 16:46:02.380562"], ["updated_at", "2022-06-04 16:46:02.380562"]]
  [1m[35m (2.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "example-2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "irmgard wiza"], ["email", "example-2@example.com"], ["password_digest", "$2a$12$lXJPf5CMKeRFiN3N04ur.Owgw.xk0WvO93Mn3Pqp2NImLth1vqSom"], ["created_at", "2022-06-04 16:46:02.627405"], ["updated_at", "2022-06-04 16:46:02.627405"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" LIMIT ?[0m  [["LIMIT", 3]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Create (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "description", "category", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "beneath the"], ["description", "do. or do not. there is no try."], ["category", "horror"], ["user_id", 1], ["created_at", "2022-06-04 16:46:02.655744"], ["updated_at", "2022-06-04 16:46:02.655744"]]
  [1m[35m (3.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mBook Create (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "description", "category", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "an instant "], ["description", "luminous beings are we - not th"], ["category", "classic"], ["user_id", 2], ["created_at", "2022-06-04 16:46:02.661245"], ["updated_at", "2022-06-04 16:46:02.661245"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mBook Create (0.4ms)[0m  [1m[32mINSERT INTO "books" ("title", "description", "category", "user_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "vanity fair"], ["description", "feel the force!"], ["category", "biography/autobiography"], ["user_id", 3], ["created_at", "2022-06-04 16:46:02.663727"], ["updated_at", "2022-06-04 16:46:02.663727"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" ORDER BY "books"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBook Load (0.0ms)[0m  [1m[34mSELECT "books".* FROM "books" WHERE "books"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mFavourite Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "favourites" WHERE "favourites"."book_id" = ? AND "favourites"."user_id" = ? LIMIT ?[0m  [["book_id", 1], ["user_id", 1], ["LIMIT", 1]]
  [1m[36mFavourite Create (6.4ms)[0m  [1m[32mINSERT INTO "favourites" ("user_id", "book_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["book_id", 1], ["created_at", "2022-06-04 16:46:02.673630"], ["updated_at", "2022-06-04 16:46:02.673630"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
Started GET "/" for ::1 at 2022-06-04 11:46:15 -0500
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StaticController#home as HTML
  Rendering layouts/home.html.erb within layouts/static
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/data/_users.html.erb:13
  Rendered data/_users.html.erb (Duration: 9.7ms | Allocations: 7332)
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  ↳ app/views/data/_books.html.erb:13
  Rendered data/_books.html.erb (Duration: 9.0ms | Allocations: 6373)
  [1m[36mFavourite Load (0.1ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites"[0m
  ↳ app/views/data/_favourites.html.erb:11
  Rendered data/_favourites.html.erb (Duration: 5.1ms | Allocations: 4046)
  Rendered layouts/home.html.erb within layouts/static (Duration: 26.5ms | Allocations: 18585)
  Rendered layouts/_rails_default.erb (Duration: 252.8ms | Allocations: 10394)
  Rendered layouts/_shim.html.erb (Duration: 1.1ms | Allocations: 77)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 93)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 80)
Completed 200 OK in 304ms (Views: 296.6ms | ActiveRecord: 1.0ms | Allocations: 32403)


Started GET "/" for ::1 at 2022-06-04 11:46:16 -0500
Processing by StaticController#home as HTML
  Rendering layouts/home.html.erb within layouts/static
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  ↳ app/views/data/_users.html.erb:13
  Rendered data/_users.html.erb (Duration: 1.9ms | Allocations: 706)
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT "books".* FROM "books"[0m
  ↳ app/views/data/_books.html.erb:13
  Rendered data/_books.html.erb (Duration: 0.6ms | Allocations: 693)
  [1m[36mFavourite Load (0.0ms)[0m  [1m[34mSELECT "favourites".* FROM "favourites"[0m
  ↳ app/views/data/_favourites.html.erb:11
  Rendered data/_favourites.html.erb (Duration: 0.5ms | Allocations: 628)
  Rendered layouts/home.html.erb within layouts/static (Duration: 3.3ms | Allocations: 2212)
  Rendered layouts/_rails_default.erb (Duration: 6.2ms | Allocations: 4023)
  Rendered layouts/_shim.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layouts/_header.html.erb (Duration: 0.0ms | Allocations: 5)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 5)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.3ms | Allocations: 6737)


Started GET "/books" for ::1 at 2022-06-04 11:46:21 -0500
Processing by BooksController#index as HTML
Completed 500 Internal Server Error in 82ms (ActiveRecord: 0.0ms | Allocations: 79886)


  
NameError (undefined local variable or method `current_user' for #<BooksController:0x000000013a640dd0>):
  
app/controllers/books_controller.rb:8:in `index'
  [1m[35m (16.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "password_digest" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185636"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "books" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" varchar, "category" varchar, "user_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_bc582ddd02"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE  INDEX "index_books_on_user_id" ON "books" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185712"]]
  [1m[35m (0.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateFavourites (20200831185743)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "favourites" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "book_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_3073f88368"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_a08454283e"
FOREIGN KEY ("book_id")
  REFERENCES "books" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_favourites_on_user_id" ON "favourites" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE  INDEX "index_favourites_on_book_id" ON "favourites" ("book_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200831185743"]]
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "admin" boolean DEFAULT 0[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200907184308"]]
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-06-04 23:49:53.538616"], ["updated_at", "2022-06-04 23:49:53.538616"]]
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/signup" for ::1 at 2022-06-04 18:50:16 -0500
  [1m[35m (1.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Create (4.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "test1"], ["email", "a@a.a"], ["password_digest", "$2a$12$rm3AJFtKnRPeV.ZZ6Wacg.P1gyGkmdxGMF3fQgOjacQC8tmmtRIsm"], ["created_at", "2022-06-04 23:50:17.650521"], ["updated_at", "2022-06-04 23:50:17.650521"]]
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 787ms (Views: 0.3ms | ActiveRecord: 7.0ms | Allocations: 9962)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (5.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(255), `description` varchar(255), `category` varchar(255), `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (20200831185743)
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE `favourites` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `user_id` bigint, `book_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_favourites_on_user_id`  (`user_id`),  INDEX `index_favourites_on_book_id`  (`book_id`), CONSTRAINT `fk_rails_3073f88368`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_a08454283e`
FOREIGN KEY (`book_id`)
  REFERENCES `books` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185743')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 00:57:30.715137', '2022-06-05 00:57:30.715137')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-04 19:58:12 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.f", "password_digest"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.f", "password_digest"=>"[FILTERED]"}}
[31mUnpermitted parameters: :password_digest, :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:6)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.f' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
Completed 422 Unprocessable Entity in 3389ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 354083)


Started POST "/signup" for ::1 at 2022-06-04 19:58:22 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.f", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.f"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:6)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.f' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.f', '$2a$12$rvXT7pSqnAGvgEUqGNSIr.eUTJGd2FXM7Yfng0oXvdiNxtp/EV6n2', '2022-06-05 00:58:23.035294', '2022-06-05 00:58:23.035294')[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.f' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.f' LIMIT 1[0m  [["email", "a@a.f"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 785ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 5754)


Started POST "/signup" for ::1 at 2022-06-04 20:01:29 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.f", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.f"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:6)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.f' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
Completed 422 Unprocessable Entity in 261ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 7169)


Started POST "/signup" for ::1 at 2022-06-04 20:01:33 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:6)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.e' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.e', '$2a$12$UyrAwV66OwauHGAePzaI2.YnULoF9nomCA4eFohpVRd73gFlHQN5i', '2022-06-05 01:01:33.724396', '2022-06-05 01:01:33.724396')[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:6:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.e' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.e' LIMIT 1[0m  [["email", "a@a.e"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 749ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 5464)


Started GET "/users" for ::1 at 2022-06-04 20:01:45 -0500
  
ActionController::RoutingError (No route matches [GET] "/users"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/2" for ::1 at 2022-06-04 20:02:15 -0500
  
ActionController::RoutingError (No route matches [GET] "/users/2"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/2" for ::1 at 2022-06-04 20:02:21 -0500
  
ActionController::RoutingError (No route matches [GET] "/users/2"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/2" for ::1 at 2022-06-04 20:03:35 -0500
  
AbstractController::ActionNotFound (The action 'show' could not be found for UsersController):
  
actionpack (6.0.5) lib/abstract_controller/base.rb:131:in `process'
actionpack (6.0.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3.1) lib/rack/etag.rb:27:in `call'
rack (2.2.3.1) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3.1) lib/rack/head.rb:12:in `call'
activerecord (6.0.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/2" for ::1 at 2022-06-04 20:03:55 -0500
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
AbstractController::ActionNotFound (The action 'show' could not be found for UsersController):
  
actionpack (6.0.5) lib/abstract_controller/base.rb:131:in `process'
actionpack (6.0.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3.1) lib/rack/etag.rb:27:in `call'
rack (2.2.3.1) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3.1) lib/rack/head.rb:12:in `call'
activerecord (6.0.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/2" for ::1 at 2022-06-04 20:04:53 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 521)


Started GET "/users/2" for ::1 at 2022-06-04 20:05:24 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 35ms (Views: 0.1ms | ActiveRecord: 5.8ms | Allocations: 7660)


Started GET "/users" for ::1 at 2022-06-04 20:05:28 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 1.7ms | ActiveRecord: 1.3ms | Allocations: 1812)


Started GET "/users/2" for ::1 at 2022-06-04 20:05:32 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 778)


Started GET "/users" for ::1 at 2022-06-04 20:05:48 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 1.1ms | Allocations: 1802)


Started GET "/users/1" for ::1 at 2022-06-04 20:05:52 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 778)


Started GET "/users/1" for ::1 at 2022-06-05 09:04:13 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 7851)


Started GET "/users" for ::1 at 2022-06-05 09:04:15 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 2.6ms | ActiveRecord: 0.9ms | Allocations: 1827)


Started GET "/users/2" for ::1 at 2022-06-05 09:04:18 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 778)


Started GET "/users/2" for ::1 at 2022-06-05 09:05:08 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:13:in `show'
Completed 200 OK in 49ms (Views: 0.3ms | ActiveRecord: 10.6ms | Allocations: 7218)


Started GET "/users/2" for ::1 at 2022-06-05 09:05:48 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `find_user'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 7250)


Started GET "/books" for ::1 at 2022-06-05 09:07:39 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.3ms | Allocations: 9556)


  
ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'books.published' in 'where clause'):
  
app/controllers/concerns/response.rb:4:in `json_response'
app/controllers/books_controller.rb:12:in `index'
Started GET "/books" for ::1 at 2022-06-05 09:08:55 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 2.4ms | Allocations: 9088)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (38.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `admin` tinyint(1) DEFAULT FALSE, `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (20200831185743)
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE `favourites` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `user_id` bigint, `book_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_favourites_on_user_id`  (`user_id`),  INDEX `index_favourites_on_book_id`  (`book_id`), CONSTRAINT `fk_rails_3073f88368`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_a08454283e`
FOREIGN KEY (`book_id`)
  REFERENCES `books` (`id`)
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185743')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:11:59.729087', '2022-06-05 14:11:59.729087')[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (8.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateFavourites (20200831185743)
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `favourites` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `user_id` bigint, `book_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_favourites_on_user_id`  (`user_id`),  INDEX `index_favourites_on_book_id`  (`book_id`), CONSTRAINT `fk_rails_3073f88368`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
, CONSTRAINT `fk_rails_a08454283e`
FOREIGN KEY (`book_id`)
  REFERENCES `books` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185743')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:12:11.232989', '2022-06-05 14:12:11.232989')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started GET "/books" for ::1 at 2022-06-05 09:12:30 -0500
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 422 Unprocessable Entity in 56ms (Views: 0.3ms | ActiveRecord: 7.8ms | Allocations: 4600)


Started GET "/users" for ::1 at 2022-06-05 09:12:47 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 422 Unprocessable Entity in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 813)


Started GET "/users/1" for ::1 at 2022-06-05 09:12:50 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 422 Unprocessable Entity in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 778)


Started GET "/signup" for ::1 at 2022-06-05 09:15:55 -0500
  
ActionController::RoutingError (No route matches [GET] "/signup"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/signup" for ::1 at 2022-06-05 09:16:49 -0500
  
ActionController::RoutingError (No route matches [GET] "/signup"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/signup" for ::1 at 2022-06-05 09:17:07 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.e' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.e', '$2a$12$N.ZhDzZg0LVobgHdGovRCOTFxfExq0OQKZRIJ8dmAclbAl8DTXxH2', '2022-06-05 14:17:08.072708', '2022-06-05 14:17:08.072708')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.e' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.e' LIMIT 1[0m  [["email", "a@a.e"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 753ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 10846)


Started GET "/users" for ::1 at 2022-06-05 09:17:38 -0500
Processing by UsersController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 172)


Started GET "/users/1" for ::1 at 2022-06-05 09:17:47 -0500
Processing by UsersController#show as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "id"=>"1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
Completed 422 Unprocessable Entity in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 172)


Started GET "/users/1" for ::1 at 2022-06-05 09:18:00 -0500
Processing by UsersController#show as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "id"=>"1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:25:in `find_user'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1493)


Started GET "/users" for ::1 at 2022-06-05 09:18:03 -0500
Processing by UsersController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 12ms (Views: 8.7ms | ActiveRecord: 1.1ms | Allocations: 1677)


Started GET "/books" for ::1 at 2022-06-05 09:20:58 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1659)


Started GET "/books" for ::1 at 2022-06-05 09:21:15 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 4.2ms | ActiveRecord: 1.9ms | Allocations: 6059)


Started GET "/books/101" for ::1 at 2022-06-05 09:21:19 -0500
Processing by BooksController#show as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "id"=>"101", "book"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 101 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1602)


Started GET "/books" for ::1 at 2022-06-05 09:21:54 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 1745)


Started GET "/books/102" for ::1 at 2022-06-05 09:21:58 -0500
Processing by BooksController#show as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "id"=>"102", "book"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 102 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.2ms | Allocations: 1474)


Started GET "/books" for ::1 at 2022-06-05 09:22:03 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.3ms | ActiveRecord: 0.9ms | Allocations: 1743)


Started GET "/books" for ::1 at 2022-06-05 09:22:56 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 18ms (Views: 6.8ms | ActiveRecord: 2.7ms | Allocations: 11973)


Started GET "/users" for ::1 at 2022-06-05 09:23:03 -0500
Processing by UsersController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.6ms | Allocations: 1724)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (8.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:25:37.312958', '2022-06-05 14:25:37.312958')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 09:26:00 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.f", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.f", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.f' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.f', '$2a$12$ztDwjsoj1LOImvaGQPdxXO5oOfVftbuZ51G06lxtMVzRMRKTiNesK', '2022-06-05 14:26:00.520984', '2022-06-05 14:26:00.520984')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.f' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.f' LIMIT 1[0m  [["email", "a@a.f"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 760ms (Views: 0.1ms | ActiveRecord: 3.8ms | Allocations: 10320)


Started GET "/users" for ::1 at 2022-06-05 09:26:20 -0500
Processing by UsersController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 17ms (Views: 1.5ms | ActiveRecord: 0.8ms | Allocations: 3026)


Started GET "/users/1" for ::1 at 2022-06-05 09:26:25 -0500
Processing by UsersController#show as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "id"=>"1", "user"=>{"name"=>"test1", "email"=>"a@a.e", "author_pseudonym"=>"a1"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 1492)


Started GET "/books" for ::1 at 2022-06-05 09:26:30 -0500
Processing by BooksController#index as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.e", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "book"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 1702)


Started POST "/books" for ::1 at 2022-06-05 09:32:07 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 3113ms (ActiveRecord: 0.8ms | Allocations: 361151)


  
NoMethodError (undefined method `category' for #<Book:0x00000001063d55c0>):
  
app/controllers/books_controller.rb:20:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:32:49 -0500
  [1m[35m (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 351ms (ActiveRecord: 6.0ms | Allocations: 362090)


  
NoMethodError (undefined method `category' for #<Book:0x0000000142fec250>):
  
app/controllers/books_controller.rb:20:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:33:12 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 4399)


  
NoMethodError (undefined method `category' for #<Book:0x0000000111c15e78>):
  
app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:33:50.292282', '2022-06-05 14:33:50.292282')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 09:34:03 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$/NVhC7.yQSJGISexYQUx6uJ3uLvxYDVM0ifIOu6NsXuiEfHdlgWvi', '2022-06-05 14:34:03.650229', '2022-06-05 14:34:03.650229')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 761ms (Views: 0.2ms | ActiveRecord: 3.8ms | Allocations: 10318)


Started POST "/books" for ::1 at 2022-06-05 09:34:12 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 320ms (ActiveRecord: 2.9ms | Allocations: 355276)


  
NoMethodError (undefined method `category' for #<Book:0x0000000123865578>):
  
app/controllers/books_controller.rb:20:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:34:48 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.5ms | Allocations: 14823)


  
NoMethodError (undefined method `category' for #<Book:0x00000001140b7c90>):
  
app/controllers/books_controller.rb:20:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:35:15 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.5ms | Allocations: 14771)


  
NoMethodError (undefined method `category' for #<Book:0x0000000142ab7e88>):
  
app/controllers/books_controller.rb:21:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:36:06 -0500
  
ArgumentError (You need to supply at least one validation):
  
app/models/book.rb:9:in `<class:Book>'
app/models/book.rb:1:in `<main>'
Started POST "/books" for ::1 at 2022-06-05 09:36:22 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
Completed 422 Unprocessable Entity in 9ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 11916)


Started POST "/books" for ::1 at 2022-06-05 09:36:39 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameters: :user_id, :book[0m
Completed 422 Unprocessable Entity in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1576)


Started POST "/books" for ::1 at 2022-06-05 09:37:05 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 14:37:06.012440', '2022-06-05 14:37:06.012440')[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 2.7ms | Allocations: 15231)


  
ActiveRecord::NotNullViolation (Mysql2::Error: Field 'published' doesn't have a default value):
  
app/controllers/books_controller.rb:20:in `create'
Started POST "/books" for ::1 at 2022-06-05 09:38:01 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 67ms (ActiveRecord: 2.1ms | Allocations: 86983)


  
NameError (undefined local variable or method `book' for #<BooksController:0x000000011523b9d0>):
  
app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT FALSE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:39:46.826834', '2022-06-05 14:39:46.826834')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 09:40:35 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$o0YQLHVXokgvfv6NC8DZIOs0swzeTrmCLqZGjw.Ke/v0NphIf6Pb2', '2022-06-05 14:40:36.309856', '2022-06-05 14:40:36.309856')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 761ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 10318)


Started POST "/books" for ::1 at 2022-06-05 09:40:39 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[36mBook Create (0.5ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 14:40:39.758762', '2022-06-05 14:40:39.758762')[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 10207)


Started GET "/books" for ::1 at 2022-06-05 09:40:44 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms | Allocations: 1707)


Started GET "/books" for ::1 at 2022-06-05 09:40:46 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 1.9ms | Allocations: 1610)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:41:16.335044', '2022-06-05 14:41:16.335044')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 09:41:23 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$x/f7JkmF98GYAfRd5fEK6OKjYhzncAjzJRypiHp6PCqf0J9u0fkCC', '2022-06-05 14:41:24.152721', '2022-06-05 14:41:24.152721')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 752ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 10319)


Started POST "/books" for ::1 at 2022-06-05 09:41:34 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[36mBook Create (0.5ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 14:41:34.380436', '2022-06-05 14:41:34.380436')[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 8.2ms | Allocations: 10207)


Started GET "/books" for ::1 at 2022-06-05 09:41:37 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.6ms | Allocations: 1780)


Started GET "/books/1" for ::1 at 2022-06-05 09:41:40 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.0ms | Allocations: 1604)


Started DELETE "/books/1" for ::1 at 2022-06-05 09:41:58 -0500
Processing by BooksController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
[31mUnpermitted parameter: :id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[36mBook Update (0.2ms)[0m  [1m[33mUPDATE `books` SET `books`.`published` = FALSE, `books`.`updated_at` = '2022-06-05 14:41:59.015727' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 4946)


Started GET "/books/1" for ::1 at 2022-06-05 09:42:02 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1462)


Started GET "/books" for ::1 at 2022-06-05 09:42:04 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.4ms | ActiveRecord: 1.9ms | Allocations: 1596)


Started GET "/books" for ::1 at 2022-06-05 09:43:06 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 2.1ms | Allocations: 8847)


Started GET "/books/1" for ::1 at 2022-06-05 09:43:09 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.1ms | Allocations: 7747)


  
NoMethodError (undefined method `where' for #<Book:0x000000014fcaa490>
Did you mean?  when):
  
app/controllers/books_controller.rb:16:in `show'
Started GET "/books/1" for ::1 at 2022-06-05 09:44:53 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, NULL)[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 404 Not Found in 12ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 12913)


Started GET "/books/1" for ::1 at 2022-06-05 09:45:50 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, NULL)[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 404 Not Found in 15ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 12875)


Started GET "/books/1" for ::1 at 2022-06-05 09:46:42 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` IN (1, NULL)[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 404 Not Found in 12ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 12862)


Started GET "/books/1" for ::1 at 2022-06-05 09:46:59 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 12932)


Started GET "/books" for ::1 at 2022-06-05 09:47:03 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 1732)


Started GET "/books" for ::1 at 2022-06-05 09:48:29 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 22ms (Views: 6.0ms | ActiveRecord: 2.8ms | Allocations: 13054)


Started GET "/books/1" for ::1 at 2022-06-05 09:48:31 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms | Allocations: 1728)


Started GET "/books/1" for ::1 at 2022-06-05 09:48:53 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 1724)


Started GET "/books/1" for ::1 at 2022-06-05 09:48:59 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 1724)


Started GET "/books/1" for ::1 at 2022-06-05 09:49:13 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1724)


Started GET "/books/1" for ::1 at 2022-06-05 09:49:15 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.8ms | Allocations: 1724)


Started GET "/books/1" for ::1 at 2022-06-05 09:50:11 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 12ms (Views: 3.8ms | ActiveRecord: 2.2ms | Allocations: 13036)


Started GET "/books/1" for ::1 at 2022-06-05 09:50:54 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 2.1ms | Allocations: 14929)


  
NoMethodError (undefined method `where' for #<Book:0x0000000128012bc8>
Did you mean?  when):
  
app/controllers/books_controller.rb:37:in `find_book'
Started GET "/books/1" for ::1 at 2022-06-05 09:51:03 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 2.2ms | Allocations: 12932)


Started GET "/books" for ::1 at 2022-06-05 09:51:35 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 1.4ms | Allocations: 1731)


Started GET "/books?title=test" for ::1 at 2022-06-05 09:51:43 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test'[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 1.2ms | Allocations: 1633)


Started GET "/books?title=test1" for ::1 at 2022-06-05 09:51:45 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1'[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 1.7ms | Allocations: 1768)


Started GET "/books?title=test1&price=111" for ::1 at 2022-06-05 09:51:59 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "price"=>"111"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 1805)


Started GET "/books?title=test1&price=1111" for ::1 at 2022-06-05 09:52:01 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "price"=>"1111"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 1111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 1.2ms | Allocations: 1670)


Started GET "/books?title=test1&price=111" for ::1 at 2022-06-05 09:52:07 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "price"=>"111"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 1805)


Started DELETE "/books/1" for ::1 at 2022-06-05 09:52:27 -0500
Processing by BooksController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
[31mUnpermitted parameter: :id[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[36mBook Update (0.1ms)[0m  [1m[33mUPDATE `books` SET `books`.`published` = FALSE, `books`.`updated_at` = '2022-06-05 14:52:27.646562' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:26:in `destroy'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 5224)


Started GET "/books/1" for ::1 at 2022-06-05 09:52:31 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 1462)


Started GET "/books/1" for ::1 at 2022-06-05 09:52:33 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:37:in `find_book'
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1462)


Started GET "/books" for ::1 at 2022-06-05 09:52:36 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 1597)


Started GET "/books" for ::1 at 2022-06-05 09:53:57 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 17ms (Views: 1.7ms | ActiveRecord: 2.3ms | Allocations: 8844)


Started GET "/books/1" for ::1 at 2022-06-05 09:53:59 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 844)


Started GET "/books/1" for ::1 at 2022-06-05 09:54:10 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 7644)


Started GET "/books/1" for ::1 at 2022-06-05 09:54:26 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 8826)


Started GET "/books" for ::1 at 2022-06-05 09:54:32 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 1.7ms | Allocations: 1596)


Started GET "/books/1" for ::1 at 2022-06-05 09:54:38 -0500
Processing by BooksController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND (1)[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1611)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (7.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 14:57:08.939920', '2022-06-05 14:57:08.939920')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 09:57:22 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$CuLDR.xtz1viHwd5UP0jw.LzX/5agbtdG7MI1CmRueGXBCh4X00Ge', '2022-06-05 14:57:23.002140', '2022-06-05 14:57:23.002140')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 762ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 9818)


Started POST "/books/1" for ::1 at 2022-06-05 09:57:40 -0500
  
ActionController::RoutingError (No route matches [POST] "/books/1"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/books" for ::1 at 2022-06-05 09:57:45 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 14:57:45.238910', '2022-06-05 14:57:45.238910')[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:20:in `create'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 10205)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 15:00:00.948863', '2022-06-05 15:00:00.948863')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 10:00:22 -0500
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$5o.X9ubjNoRqR3lmfKqvAOqfbFD1pRljboDru.kprXftvadGlhoO6', '2022-06-05 15:00:23.139243', '2022-06-05 15:00:23.139243')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 748ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 10322)


Started POST "/books" for ::1 at 2022-06-05 10:00:30 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.8ms | Allocations: 41747)


  
NoMethodError (undefined method `check_admin' for #<BooksController:0x0000000111b21f08>):
  
activesupport (6.0.5) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.5) lib/active_support/callbacks.rb:181:in `block (2 levels) in halting_and_conditional'
actionpack (6.0.5) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.5) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (6.0.5) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.5) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.5) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.5) lib/active_support/callbacks.rb:134:in `run_callbacks'
actionpack (6.0.5) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.5) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.5) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.5) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.5) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.5) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.5) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.5) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.5) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.5) lib/abstract_controller/base.rb:136:in `process'
actionpack (6.0.5) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.5) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.5) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.5) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.2.3.1) lib/rack/etag.rb:27:in `call'
rack (2.2.3.1) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3.1) lib/rack/head.rb:12:in `call'
activerecord (6.0.5) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.5) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.5) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/books" for ::1 at 2022-06-05 10:01:05 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 401 Unauthorized in 10ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 7041)


Started POST "/books" for ::1 at 2022-06-05 10:01:30 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:01:30.320461', '2022-06-05 15:01:30.320461')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 29ms (Views: 0.1ms | ActiveRecord: 3.8ms | Allocations: 16044)


Started POST "/auth/login" for ::1 at 2022-06-05 10:02:48 -0500
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 200 OK in 494ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 1592)


Started POST "/books" for ::1 at 2022-06-05 10:02:55 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:02:55.571478', '2022-06-05 15:02:55.571478')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 4210)


Started POST "/books" for ::1 at 2022-06-05 10:03:49 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:03:49.658016', '2022-06-05 15:03:49.658016')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 500 Internal Server Error in 68ms (ActiveRecord: 2.9ms | Allocations: 94952)


  
NameError (undefined local variable or method `user' for #<BooksController:0x0000000111a8ae78>
Did you mean?  super):
  
app/controllers/books_controller.rb:22:in `create'
Started POST "/books" for ::1 at 2022-06-05 10:05:18 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:05:18.508520', '2022-06-05 15:05:18.508520')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 500 Internal Server Error in 108ms (ActiveRecord: 3.5ms | Allocations: 96143)


  
NameError (undefined local variable or method `book' for #<BooksController:0x00000001277157c8>
Did you mean?  @book):
  
app/controllers/books_controller.rb:22:in `create'
Started POST "/books" for ::1 at 2022-06-05 10:05:34 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:05:34.120652', '2022-06-05 15:05:34.120652')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 500 Internal Server Error in 59ms (ActiveRecord: 1.4ms | Allocations: 83868)


  
NameError (undefined local variable or method `book' for #<BooksController:0x00000001323a7c70>
Did you mean?  @book):
  
app/controllers/books_controller.rb:22:in `create'
Started POST "/books" for ::1 at 2022-06-05 10:05:52 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:05:52.193451', '2022-06-05 15:05:52.193451')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 14076)


Started POST "/books" for ::1 at 2022-06-05 10:06:10 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
Completed 422 Unprocessable Entity in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 197)


Started POST "/books" for ::1 at 2022-06-05 10:06:15 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:06:15.421943', '2022-06-05 15:06:15.421943')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 3654)


Started POST "/auth/login" for ::1 at 2022-06-05 10:06:24 -0500
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 200 OK in 499ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 1589)


Started POST "/books" for ::1 at 2022-06-05 10:06:30 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.8ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:06:30.599769', '2022-06-05 15:06:30.599769')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 3650)


Started POST "/books" for ::1 at 2022-06-05 10:06:31 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.9ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:06:31.713265', '2022-06-05 15:06:31.713265')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 4.9ms | Allocations: 3650)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (5.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 15:11:36.931068', '2022-06-05 15:11:36.931068')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/auth/login" for ::1 at 2022-06-05 10:11:52 -0500
  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 401 Unauthorized in 17ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 4364)


Started POST "/signup" for ::1 at 2022-06-05 10:11:56 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"test1", "email"=>"a@a.a", "password"=>"[FILTERED]", "author_pseudonym"=>"a1", "user"=>{"name"=>"test1", "email"=>"a@a.a", "author_pseudonym"=>"a1"}}
[31mUnpermitted parameters: :author_pseudonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-rails-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('test1', 'a@a.a', '$2a$12$WlyPau1QsHUyNK/jHbW4HuT7kv0hS1F2KeTqs9HKI4rZKWoid7bzO', '2022-06-05 15:11:57.196143', '2022-06-05 15:11:57.196143')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 744ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 9738)


Started POST "/auth/login" for ::1 at 2022-06-05 10:12:01 -0500
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 200 OK in 495ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1382)


Started POST "/books" for ::1 at 2022-06-05 10:12:08 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 1.0ms | Allocations: 208)


Started POST "/books" for ::1 at 2022-06-05 10:12:12 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.3ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test1', 'book good', 111.0, 1, '2022-06-05 15:12:12.468512', '2022-06-05 15:12:12.468512')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 31ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 10093)


Started GET "/books" for ::1 at 2022-06-05 10:12:16 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 1.5ms | Allocations: 1844)


Started GET "/users" for ::1 at 2022-06-05 10:12:22 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 100)


Started GET "/users" for ::1 at 2022-06-05 10:12:25 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 0.9ms | Allocations: 1679)


Started GET "/users/1" for ::1 at 2022-06-05 10:12:33 -0500
Processing by UsersController#show as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "user"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 3.0ms | Allocations: 1483)


Started GET "/users" for ::1 at 2022-06-05 10:12:35 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 1674)


Started GET "/books" for ::1 at 2022-06-05 10:12:41 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1815)


Started DELETE "/books/1" for ::1 at 2022-06-05 10:12:48 -0500
Processing by BooksController#destroy as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
[31mUnpermitted parameters: :id, :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[36mBook Update (0.4ms)[0m  [1m[33mUPDATE `books` SET `books`.`published` = FALSE, `books`.`updated_at` = '2022-06-05 15:12:48.233951' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 5326)


Started GET "/books/1" for ::1 at 2022-06-05 10:12:51 -0500
Processing by BooksController#show as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1474)


Started GET "/books" for ::1 at 2022-06-05 10:12:53 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 7ms (Views: 2.1ms | ActiveRecord: 2.0ms | Allocations: 1682)


Started GET "/books" for ::1 at 2022-06-05 11:01:51 -0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.9ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 95ms (Views: 1.5ms | ActiveRecord: 12.6ms | Allocations: 9146)


Started GET "/users" for ::1 at 2022-06-05 11:01:58 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 1.0ms | Allocations: 1755)


Started GET "/books" for ::1 at 2022-06-05 11:02:11 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.8ms | Allocations: 6124)


Started GET "/books" for ::1 at 2022-06-05 11:02:14 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
Completed 422 Unprocessable Entity in 20ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1433)


Started GET "/books" for ::1 at 2022-06-05 11:02:16 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.6ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 7ms (Views: 2.3ms | ActiveRecord: 1.3ms | Allocations: 1829)


Started POST "/auth/login" for ::1 at 2022-06-05 11:02:20 -0500
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 200 OK in 529ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 1647)


Started POST "/books" for ::1 at 2022-06-05 11:06:50 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.9ms | Allocations: 7706)


  
NoMethodError (undefined method `books' for #<User:0x0000000146d93248>):
  
app/controllers/books_controller.rb:21:in `create'
Started POST "/books" for ::1 at 2022-06-05 11:07:00 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.2ms | Allocations: 2816)


  
NoMethodError (undefined method `books' for #<User:0x0000000160607d20>):
  
app/controllers/books_controller.rb:21:in `create'
Started POST "/books/1" for ::1 at 2022-06-05 11:07:28 -0500
  
ActionController::RoutingError (No route matches [POST] "/books/1"):
  
actionpack (6.0.5) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.5) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.5) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.5) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3.1) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.5) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3.1) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.5) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
railties (6.0.5) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/books/1" for ::1 at 2022-06-05 11:07:32 -0500
Processing by BooksController#show as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 5756)


Started GET "/books" for ::1 at 2022-06-05 11:07:35 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 1.7ms | ActiveRecord: 1.0ms | Allocations: 1815)


Started POST "/books" for ::1 at 2022-06-05 11:07:39 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms | Allocations: 2804)


  
NoMethodError (undefined method `books' for #<User:0x0000000146c28480>):
  
app/controllers/books_controller.rb:21:in `create'
Started POST "/books" for ::1 at 2022-06-05 11:08:39 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.9ms | Allocations: 7656)


  
NoMethodError (undefined method `books' for #<User:0x0000000146d12a08>):
  
app/controllers/books_controller.rb:27:in `create'
Started GET "/books" for ::1 at 2022-06-05 11:09:01 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms | Allocations: 2803)


  
NoMethodError (undefined method `books' for #<User:0x00000001463ed1f8>):
  
app/controllers/books_controller.rb:22:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:12:21 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 3.1ms | ActiveRecord: 2.1ms | Allocations: 10770)


Started GET "/books" for ::1 at 2022-06-05 11:12:25 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'tes' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 1.1ms | Allocations: 1680)


Started GET "/books" for ::1 at 2022-06-05 11:12:27 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"tes", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'tes' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 1.1ms | Allocations: 1680)


Started GET "/books" for ::1 at 2022-06-05 11:12:29 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1816)


Started GET "/books" for ::1 at 2022-06-05 11:12:39 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test1", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test1' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 1817)


Started GET "/books" for ::1 at 2022-06-05 11:13:06 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.9ms | Allocations: 1681)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (7.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 16:13:39.506642', '2022-06-05 16:13:39.506642')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/auth/login" for ::1 at 2022-06-05 11:13:48 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by AuthenticationController#authenticate as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "authentication"=>{"email"=>"a@a.a", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.3ms | Allocations: 4100)


  
NameError (uninitialized constant AuthenticateUser::Message
Did you mean?  MessagePack):
  
app/auth/authenticate_user.rb:23:in `user'
app/auth/authenticate_user.rb:10:in `call'
app/controllers/authentication_controller.rb:6:in `authenticate'
Started POST "/signup" for ::1 at 2022-06-05 11:13:57 -0500
Processing by UsersController#create as */*
  Parameters: {"email"=>"a@a.a", "password"=>"[FILTERED]", "user"=>{"email"=>"a@a.a"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 586ms (Views: 0.1ms | ActiveRecord: 3.5ms | Allocations: 354143)


Started POST "/signup" for ::1 at 2022-06-05 11:14:10 -0500
Error occurred while parsing request parameters.
Contents:

{
    "name": "json"
    "email": "a@a.a",
    "password": "asass"
}
Processing by UsersController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 123)


  
ActionDispatch::Http::Parameters::ParseError (783: unexpected token at '{
    "name": "json"
    "email": "a@a.a",
    "password": "asass"
}'):
  
app/controllers/users_controller.rb:40:in `user_params'
app/controllers/users_controller.rb:18:in `create'
Started POST "/signup" for ::1 at 2022-06-05 11:14:15 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"json", "email"=>"a@a.a", "password"=>"[FILTERED]", "user"=>{"name"=>"json", "email"=>"a@a.a"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'a@a.a' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('json', 'a@a.a', '$2a$12$/iJ2Fnzv1is2jeCeEda0euYbPYSDu7btKWBRTzKCFtb2kjuz7pCAa', '2022-06-05 16:14:15.660315', '2022-06-05 16:14:15.660315')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'a@a.a' LIMIT 1[0m  [["email", "a@a.a"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 763ms (Views: 0.1ms | ActiveRecord: 1.2ms | Allocations: 6336)


Started GET "/users" for ::1 at 2022-06-05 11:14:23 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 1.2ms | Allocations: 1921)


Started POST "/books" for ::1 at 2022-06-05 11:14:35 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.9ms | Allocations: 2621)


  
NameError (uninitialized constant BooksController::Books):
  
app/controllers/books_controller.rb:21:in `create'
Started POST "/books" for ::1 at 2022-06-05 11:15:12 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('test2', 'book good', 111.0, 1, '2022-06-05 16:15:12.228204', '2022-06-05 16:15:12.228204')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 33ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 14798)


Started GET "/books" for ::1 at 2022-06-05 11:15:15 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.9ms | ActiveRecord: 0.8ms | Allocations: 1838)


Started DELETE "/books/1" for ::1 at 2022-06-05 11:15:22 -0500
Processing by BooksController#destroy as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.5ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
[31mUnpermitted parameters: :id, :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[36mBook Update (0.2ms)[0m  [1m[33mUPDATE `books` SET `books`.`published` = FALSE, `books`.`updated_at` = '2022-06-05 16:15:22.358955' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 5142)


Started GET "/books/1" for ::1 at 2022-06-05 11:15:25 -0500
Processing by BooksController#show as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1474)


Started GET "/books" for ::1 at 2022-06-05 11:15:26 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.6ms | Allocations: 1692)


Started GET "/books" for ::1 at 2022-06-05 11:17:51 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 9ms (Views: 3.0ms | ActiveRecord: 2.5ms | Allocations: 10741)


Started GET "/books" for ::1 at 2022-06-05 11:17:57 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 6ms (Views: 2.0ms | ActiveRecord: 1.8ms | Allocations: 1736)


Started GET "/books" for ::1 at 2022-06-05 11:18:08 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 1821)


Started GET "/books" for ::1 at 2022-06-05 11:18:44 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 9ms (Views: 3.2ms | ActiveRecord: 2.4ms | Allocations: 10759)


Started GET "/books" for ::1 at 2022-06-05 11:19:34 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 3.1ms | ActiveRecord: 2.2ms | Allocations: 10748)


Started GET "/books" for ::1 at 2022-06-05 11:20:52 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:6:in `json_response'
Completed 200 OK in 10ms (Views: 3.3ms | ActiveRecord: 3.6ms | Allocations: 10745)


Started GET "/books" for ::1 at 2022-06-05 11:21:00 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.8ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:6:in `json_response'
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 1.9ms | Allocations: 1824)


Started GET "/books" for ::1 at 2022-06-05 11:21:09 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.4ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:6:in `json_response'
Completed 200 OK in 6ms (Views: 1.5ms | ActiveRecord: 1.5ms | Allocations: 1824)


Started GET "/books" for ::1 at 2022-06-05 11:21:21 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:6:in `json_response'
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1740)


Started GET "/books" for ::1 at 2022-06-05 11:22:35 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:9:in `json_response'
Completed 200 OK in 76ms (Views: 67.1ms | ActiveRecord: 3.1ms | Allocations: 14194)


Started GET "/books" for ::1 at 2022-06-05 11:23:04 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 41ms (ActiveRecord: 2.0ms | Allocations: 47435)


  
NoMethodError (undefined method `object' for #<BooksController:0x00000001441026c0>
Did you mean?  object_id):
  
app/controllers/concerns/response.rb:11:in `json_response'
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:23:50 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 58ms (ActiveRecord: 2.1ms | Allocations: 47457)


  
NoMethodError (undefined method `object1' for #<BooksController:0x000000014460b720>
Did you mean?  object_id):
  
app/controllers/concerns/response.rb:11:in `json_response'
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:24:43 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:9:in `json_response'
Completed 200 OK in 9ms (Views: 2.8ms | ActiveRecord: 2.2ms | Allocations: 11894)


Started GET "/books" for ::1 at 2022-06-05 11:27:04 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.4ms | Allocations: 6779)


  
ArgumentError (too few arguments):
  
app/controllers/concerns/response.rb:9:in `format'
app/controllers/concerns/response.rb:9:in `json_response'
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:28:15 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:10:in `json_response'
Completed 200 OK in 12ms (Views: 3.3ms | ActiveRecord: 2.3ms | Allocations: 11837)


Started GET "/books" for ::1 at 2022-06-05 11:28:26 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:6:in `json_response'
Completed 200 OK in 6ms (Views: 2.3ms | ActiveRecord: 1.1ms | Allocations: 1833)


Started GET "/books" for ::1 at 2022-06-05 11:28:34 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.7ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:10:in `json_response'
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 1.1ms | Allocations: 1756)


Started GET "/books" for ::1 at 2022-06-05 11:29:44 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:7:in `json_response'
Completed 200 OK in 12ms (Views: 3.7ms | ActiveRecord: 2.8ms | Allocations: 11836)


Started GET "/books" for ::1 at 2022-06-05 11:31:03 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.3ms | Allocations: 5738)


  
ArgumentError (wrong number of arguments (given 0, expected 2..3)):
  
app/controllers/concerns/response.rb:3:in `response'
Started GET "/books" for ::1 at 2022-06-05 11:31:51 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 11ms (Views: 3.2ms | ActiveRecord: 2.3ms | Allocations: 11756)


Started GET "/books" for ::1 at 2022-06-05 11:31:56 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1815)


Started GET "/books" for ::1 at 2022-06-05 11:44:12 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:5:in `json_response'
Completed 200 OK in 16ms (Views: 9.9ms | ActiveRecord: 2.1ms | Allocations: 12759)


Started GET "/books" for ::1 at 2022-06-05 11:44:59 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 1.9ms | Allocations: 46667)


  
NoMethodError (undefined method `respond_to' for #<BooksController:0x00000001396f8378>
Did you mean?  respond_to?):
  
app/controllers/concerns/response.rb:5:in `json_response'
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:45:38 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.0ms | Allocations: 46686)


  
NoMethodError (undefined method `respond_to' for #<BooksController:0x000000010b3d2118>
Did you mean?  respond_to?):
  
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:45:48 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.9ms | Allocations: 41799)


  
NoMethodError (undefined method `respond_to' for #<BooksController:0x000000010b07b730>
Did you mean?  respond_to?):
  
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:45:57 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.6ms | Allocations: 5795)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/controllers/books_controller.rb:13:in `respond_to?'
app/controllers/books_controller.rb:13:in `index'
Started GET "/books" for ::1 at 2022-06-05 11:52:28 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by BooksController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "book"=>{"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'test2' AND `books`.`price` = 111.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 11ms (Views: 2.8ms | ActiveRecord: 2.0ms | Allocations: 11772)


Started POST "/signup" for ::1 at 2022-06-05 15:09:50 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api@gmail.com', '$2a$12$rEHLXJ.1IXdLgpiL5/R9EuAWEh574FkakYRM3qfKdX0kWNxDVbEOm', '2022-06-05 20:09:50.715145', '2022-06-05 20:09:50.715145')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api@gmail.com' LIMIT 1[0m  [["email", "rails-api@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 745ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 5646)


Started POST "/signup" for ::1 at 2022-06-05 15:10:14 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-1@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api-1@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api-1@gmail.com', '$2a$12$YLI1AvXpylqe526gpQxaQuZgpxitXpHJG/PIp5ZvxgXeZ3koR0Z2W', '2022-06-05 20:10:14.951436', '2022-06-05 20:10:14.951436')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-1@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-1@gmail.com' LIMIT 1[0m  [["email", "rails-api-1@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 748ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 5032)


Started GET "/users" for ::1 at 2022-06-05 15:10:23 -0500
Processing by UsersController#index as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-1@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api-1@gmail.com"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1943)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminToUser (20200907184308)
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE `users` ADD `admin` tinyint(1) DEFAULT FALSE[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200907184308')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 20:10:45.017251', '2022-06-05 20:10:45.017251')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (6.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 20:19:57.165138', '2022-06-05 20:19:57.165138')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/users" for ::1 at 2022-06-05 15:20:17 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-1@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api-1@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api-1@gmail.com', '$2a$12$kwKKA.zy.TeGyTLTlC2T5u27c1XLxNtS1TGD0c.GpCjS7vSnSYBHO', '2022-06-05 20:20:18.110371', '2022-06-05 20:20:18.110371')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-1@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-1@gmail.com' LIMIT 1[0m  [["email", "rails-api-1@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 743ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 9615)


Started POST "/users" for ::1 at 2022-06-05 15:20:25 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-1@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api-1@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 473ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 349085)


Started POST "/users" for ::1 at 2022-06-05 15:20:30 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api@gmail.com', '$2a$12$ZfHj.HlhQS7VxzXeUIAYVekbp9S4wjceJABvFROHGWicaqxlNXqPq', '2022-06-05 20:20:31.056864', '2022-06-05 20:20:31.056864')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api@gmail.com' LIMIT 1[0m  [["email", "rails-api@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 750ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 5029)


Started POST "/users" for ::1 at 2022-06-05 15:20:34 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Rails API", "email"=>"rails-api@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 258ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 3594)


Started GET "/users" for ::1 at 2022-06-05 15:20:46 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 3108)


Started GET "/users" for ::1 at 2022-06-05 15:20:57 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1661)


  
NameError (uninitialized constant AuthorizeApiRequest::Message
Did you mean?  MessagePack):
  
app/auth/authorize_api_request.rb:40:in `http_auth_header'
app/auth/authorize_api_request.rb:33:in `decoded_auth_token'
app/auth/authorize_api_request.rb:21:in `user'
app/auth/authorize_api_request.rb:10:in `call'
app/controllers/application_controller.rb:13:in `authorize_request'
Started GET "/users" for ::1 at 2022-06-05 15:21:31 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 361)


Started GET "/users" for ::1 at 2022-06-05 15:21:37 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"test2", "description"=>"book good", "price"=>111, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 25ms (Views: 0.8ms | ActiveRecord: 2.0ms | Allocations: 5186)


Started POST "/users" for ::1 at 2022-06-05 15:23:27 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api@gmail.com", "password"=>"[FILTERED]", "author_psuedonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api@gmail.com"}}
[31mUnpermitted parameters: :author_psuedonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 253ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 3752)


Started POST "/users" for ::1 at 2022-06-05 15:23:34 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com", "password"=>"[FILTERED]", "author_psuedonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com"}}
[31mUnpermitted parameters: :author_psuedonym, :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-tom@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api-tom@gmail.com', '$2a$12$XlqrN.BT3.pg/GyAaLjXQ.fv4MgXBMFVqBKY0zQwqGaIoYldc0qYO', '2022-06-05 20:23:34.801579', '2022-06-05 20:23:34.801579')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom@gmail.com' LIMIT 1[0m  [["email", "rails-api-tom@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 743ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 6292)


Started POST "/users" for ::1 at 2022-06-05 15:25:02 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com", "password"=>"[FILTERED]", "author_psuedonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com"}}
[31mUnpermitted parameter: :user[0m
Completed 500 Internal Server Error in 260ms (ActiveRecord: 1.6ms | Allocations: 3558)


  
ActiveModel::UnknownAttributeError (unknown attribute 'author_psuedonym' for User.):
  
app/controllers/users_controller.rb:18:in `create'
Started POST "/users" for ::1 at 2022-06-05 15:26:06 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-tom-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api-tom-1@gmail.com', '$2a$12$OCY3AIR4Cqy0wuoB8eXcpexri8mmg1MTEBN/miDkinyyME4aglbUO', 'Tom Bob', '2022-06-05 20:26:06.953155', '2022-06-05 20:26:06.953155')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom-1@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom-1@gmail.com' LIMIT 1[0m  [["email", "rails-api-tom-1@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 744ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 8684)


Started POST "/users" for ::1 at 2022-06-05 15:26:52 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom-1@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-tom-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 249ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 3648)


Started GET "/users" for ::1 at 2022-06-05 15:27:01 -0500
Processing by UsersController#index as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "user"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 3323)


Started POST "/books" for ::1 at 2022-06-05 15:27:15 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.2ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('Rails API book', 'Learn basics of Ruby on rails', 123.0, 1, '2022-06-05 20:27:16.009869', '2022-06-05 20:27:16.009869')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 9978)


Started POST "/books" for ::1 at 2022-06-05 15:27:20 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.1ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('Rails API book', 'Learn basics of Ruby on rails', 123.0, 1, '2022-06-05 20:27:20.161095', '2022-06-05 20:27:20.161095')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 4205)


Started DELETE "/books/1" for ::1 at 2022-06-05 15:27:27 -0500
Processing by BooksController#destroy as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
[31mUnpermitted parameters: :id, :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[36mBook Update (0.2ms)[0m  [1m[33mUPDATE `books` SET `books`.`published` = FALSE, `books`.`updated_at` = '2022-06-05 20:27:27.491100' WHERE `books`.`id` = 1[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:27:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 5155)


Started GET "/books/1" for ::1 at 2022-06-05 15:27:31 -0500
Processing by BooksController#show as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "id"=>"1", "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:38:in `find_book'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 1479)


Started GET "/books" for ::1 at 2022-06-05 15:27:35 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'Rails API book' AND `books`.`price` = 123.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 1.5ms | Allocations: 1817)


Started GET "/books" for ::1 at 2022-06-05 15:27:41 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1731)


Started GET "/users" for ::1 at 2022-06-05 15:27:58 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.9ms | Allocations: 2050)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:28:03 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 3.9ms | Allocations: 3435)


  
ActiveRecord::InvalidForeignKey (Mysql2::Error: Cannot delete or update a parent row: a foreign key constraint fails (`bookstore_api_development`.`books`, CONSTRAINT `fk_rails_bc582ddd02` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))):
  
app/controllers/users_controller.rb:26:in `destroy'
Started DELETE "/users/2" for ::1 at 2022-06-05 15:28:38 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[36mUser Destroy (0.1ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 2[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 3317)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:28:44 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 1[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.5ms | Allocations: 3421)


  
ActiveRecord::InvalidForeignKey (Mysql2::Error: Cannot delete or update a parent row: a foreign key constraint fails (`bookstore_api_development`.`books`, CONSTRAINT `fk_rails_bc582ddd02` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))):
  
app/controllers/users_controller.rb:26:in `destroy'
Started DELETE "/users/1" for ::1 at 2022-06-05 15:28:56 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1370)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (4.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 20:29:20.085717', '2022-06-05 20:29:20.085717')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/users" for ::1 at 2022-06-05 15:29:33 -0500
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'rails-api-tom@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Rails API', 'rails-api-tom@gmail.com', '$2a$12$SAzOVMaItpH6rpJf5bPTNeTwuefScipWoNbS9Iwtxf58tP2x8MVdS', 'Tom Bob', '2022-06-05 20:29:34.253677', '2022-06-05 20:29:34.253677')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'rails-api-tom@gmail.com' LIMIT 1[0m  [["email", "rails-api-tom@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 744ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 9664)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:29:46 -0500
Processing by UsersController#destroy as */*
  Parameters: {"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "id"=>"1", "user"=>{"name"=>"Rails API", "email"=>"rails-api-tom@gmail.com", "author_pseudonym"=>"Tom Bob"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 404 Not Found in 5ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1006)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:29:52 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 404 Not Found in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 780)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:30:30 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 101)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:30:49 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 1374)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:30:53 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 1373)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:30:56 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
Completed 404 Not Found in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 780)


Started POST "/signup" for ::1 at 2022-06-05 15:31:46 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Tom bob', 'tom-bob@gmail.com', '$2a$12$Byg/RZCu7uIp4GaSPs5s1.ccpN1jc1mVPsClZL1EDyELHX0vvpum6', 'Tom Bob', '2022-06-05 20:31:46.324356', '2022-06-05 20:31:46.324356')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob@gmail.com' LIMIT 1[0m  [["email", "tom-bob@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 749ms (Views: 0.1ms | ActiveRecord: 2.3ms | Allocations: 5040)


Started POST "/signup" for ::1 at 2022-06-05 15:31:56 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Tom bob 1', 'tom-bob-1@gmail.com', '$2a$12$cWq2BI9LCAKmTI75kTgNRup4lSqbQooyuqVW8yEMVEzusP2xWWOZa', 'Tom Bob', '2022-06-05 20:31:56.534749', '2022-06-05 20:31:56.534749')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-1@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-1@gmail.com' LIMIT 1[0m  [["email", "tom-bob-1@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 751ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 5042)


Started GET "/users" for ::1 at 2022-06-05 15:32:17 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.7ms | Allocations: 1820)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment'[0m
  [1m[35m (12.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_development`[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `bookstore_api_test`[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_development` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `bookstore_api_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('3881299710355281060', 0)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20200831185636)
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255), `email` varchar(255), `password_digest` varchar(255), `author_pseudonym` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185636')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBooks (20200831185712)
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE `books` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `title` varchar(256) NOT NULL, `description` varchar(512) NOT NULL, `cover_image` blob, `price` float(24) NOT NULL, `published` tinyint(1) DEFAULT TRUE NOT NULL, `user_id` bigint, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL,  INDEX `index_books_on_user_id`  (`user_id`), CONSTRAINT `fk_rails_bc582ddd02`
FOREIGN KEY (`user_id`)
  REFERENCES `users` (`id`)
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20200831185712')[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2022-06-05 20:32:52.811911', '2022-06-05 20:32:52.811911')[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT RELEASE_LOCK('3881299710355281060')[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/signup" for ::1 at 2022-06-05 15:33:07 -0500
  [1m[35m (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Tom bob', 'tom-bob@gmail.com', '$2a$12$SgQxNECda0RMpjH1PQvFPeRg9x.xdlvaLVKGqa1dNR24/w2GZn/eS', 'Tom Bob', '2022-06-05 20:33:08.454104', '2022-06-05 20:33:08.454104')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob@gmail.com' LIMIT 1[0m  [["email", "tom-bob@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 811ms (Views: 0.2ms | ActiveRecord: 11.2ms | Allocations: 9659)


Started POST "/signup" for ::1 at 2022-06-05 15:33:22 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob", "email"=>"tom-bob@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 3374ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 349113)


Started POST "/signup" for ::1 at 2022-06-05 15:33:35 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Tom bob 1', 'tom-bob-1@gmail.com', '$2a$12$9pJ.ty3Jho3h6qgws/dbuOxFx6OhO3WxOWvgSsFUL6PrBkJHMbESK', 'Tom Bob', '2022-06-05 20:33:36.231528', '2022-06-05 20:33:36.231528')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-1@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-1@gmail.com' LIMIT 1[0m  [["email", "tom-bob-1@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 768ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 5057)


Started GET "/users" for ::1 at 2022-06-05 15:33:54 -0500
Processing by UsersController#index as */*
Completed 422 Unprocessable Entity in 21ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 1255)


Started GET "/users" for ::1 at 2022-06-05 15:34:00 -0500
Processing by UsersController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 1965)


Started GET "/users/1" for ::1 at 2022-06-05 15:34:07 -0500
Processing by UsersController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 2.2ms | Allocations: 1465)


Started POST "/books" for ::1 at 2022-06-05 15:34:25 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (4.0ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('Rails API book', 'Learn basics of Ruby on rails', 123.0, 1, '2022-06-05 20:34:25.770456', '2022-06-05 20:34:25.770456')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 90ms (Views: 0.2ms | ActiveRecord: 8.9ms | Allocations: 10025)


Started GET "/books" for ::1 at 2022-06-05 15:34:35 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1, "book"=>{"title"=>"Rails API book", "description"=>"Learn basics of Ruby on rails", "price"=>123, "user_id"=>1}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'Rails API book' AND `books`.`price` = 123.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 1839)


Started POST "/books" for ::1 at 2022-06-05 15:34:52 -0500
Processing by BooksController#create as */*
  Parameters: {"title"=>"Rails API book 1", "description"=>"Learn basics of Ruby on rails 1", "price"=>226, "user_id"=>2, "book"=>{"title"=>"Rails API book 1", "description"=>"Learn basics of Ruby on rails 1", "price"=>226, "user_id"=>2}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
[31mUnpermitted parameter: :book[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[36mBook Create (0.4ms)[0m  [1m[32mINSERT INTO `books` (`title`, `description`, `price`, `user_id`, `created_at`, `updated_at`) VALUES ('Rails API book 1', 'Learn basics of Ruby on rails 1', 226.0, 2, '2022-06-05 20:34:52.943573', '2022-06-05 20:34:52.943573')[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/books_controller.rb:21:in `create'
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.1ms | Allocations: 4501)


Started GET "/books" for ::1 at 2022-06-05 15:34:58 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"Rails API book 1", "description"=>"Learn basics of Ruby on rails 1", "price"=>226, "user_id"=>2, "book"=>{"title"=>"Rails API book 1", "description"=>"Learn basics of Ruby on rails 1", "price"=>226, "user_id"=>2}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'Rails API book 1' AND `books`.`price` = 226.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 1.0ms | Allocations: 1816)


Started GET "/books" for ::1 at 2022-06-05 15:35:01 -0500
Processing by BooksController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.2ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.6ms | Allocations: 1868)


Started GET "/books?title=Rails%20API%20book%201" for ::1 at 2022-06-05 15:35:25 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"Rails API book 1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (1.1ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'Rails API book 1'[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 7ms (Views: 2.0ms | ActiveRecord: 1.5ms | Allocations: 1769)


Started GET "/books?title=Rails%20API%20book%201&price=226" for ::1 at 2022-06-05 15:35:35 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"Rails API book 1", "price"=>"226"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'Rails API book 1' AND `books`.`price` = 226.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 1806)


Started GET "/books?title=book&price=226" for ::1 at 2022-06-05 15:35:48 -0500
Processing by BooksController#index as */*
  Parameters: {"title"=>"book", "price"=>"226"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mBook Load (0.3ms)[0m  [1m[34mSELECT `books`.* FROM `books` WHERE `books`.`published` = TRUE AND `books`.`title` = 'book' AND `books`.`price` = 226.0[0m
  ↳ app/controllers/concerns/response.rb:4:in `json_response'
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 1670)


Started DELETE "/users/1" for ::1 at 2022-06-05 15:36:14 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 1371)


Started DELETE "/users/2" for ::1 at 2022-06-05 15:36:22 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1368)


Started POST "/signup" for ::1 at 2022-06-05 15:36:30 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-1@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-1@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 262ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 3602)


Started POST "/signup" for ::1 at 2022-06-05 15:36:34 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-2@gmail.com", "password"=>"[FILTERED]", "author_pseudonym"=>"Tom Bob", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-2@gmail.com", "author_pseudonym"=>"Tom Bob"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-2@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `author_pseudonym`, `created_at`, `updated_at`) VALUES ('Tom bob 1', 'tom-bob-2@gmail.com', '$2a$12$Ma6Gxrfvwz8sOlUWY1v4YeXelhLs1JztIycKHugb83H9QMle0eF2C', 'Tom Bob', '2022-06-05 20:36:35.198871', '2022-06-05 20:36:35.198871')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-2@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-2@gmail.com' LIMIT 1[0m  [["email", "tom-bob-2@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 747ms (Views: 0.1ms | ActiveRecord: 1.6ms | Allocations: 5039)


Started DELETE "/users/3" for ::1 at 2022-06-05 15:36:39 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.6ms | Allocations: 1368)


Started DELETE "/users/4" for ::1 at 2022-06-05 15:36:44 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 404 Not Found in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1340)


Started DELETE "/users/3" for ::1 at 2022-06-05 15:36:49 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 3 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 1368)


Started POST "/signup" for ::1 at 2022-06-05 15:36:59 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-2@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-2@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-2@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 253ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 4132)


Started POST "/signup" for ::1 at 2022-06-05 15:37:05 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-3@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-3@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-3@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
Completed 422 Unprocessable Entity in 262ms (Views: 0.1ms | ActiveRecord: 0.6ms | Allocations: 3614)


Started POST "/signup" for ::1 at 2022-06-05 15:37:31 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"Tom bob 1", "email"=>"tom-bob-3@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"Tom bob 1", "email"=>"tom-bob-3@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-3@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('Tom bob 1', 'tom-bob-3@gmail.com', '$2a$12$0RMiwl1xdxkjPXX6.txIc.DcMQfzRX/pOZEnX5C6PvbB1qubv/ay.', '2022-06-05 20:37:31.426939', '2022-06-05 20:37:31.426939')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-3@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-3@gmail.com' LIMIT 1[0m  [["email", "tom-bob-3@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 743ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 8651)


Started DELETE "/users/4" for ::1 at 2022-06-05 15:37:36 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 4 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[36mUser Destroy (0.1ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 4[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 1.5ms | Allocations: 3538)


Started POST "/signup" for ::1 at 2022-06-05 15:37:51 -0500
Processing by UsersController#create as */*
  Parameters: {"name"=>"general user", "email"=>"tom-bob-3@gmail.com", "password"=>"[FILTERED]", "user"=>{"name"=>"general user", "email"=>"tom-bob-3@gmail.com"}}
[31mUnpermitted parameter: :user[0m
DEPRECATION WARNING: Uniqueness validator will no longer enforce case sensitive comparison in Rails 6.1. To continue case sensitive comparison on the :email attribute in User model, pass `case_sensitive: true` option explicitly to the uniqueness validator. (called from create at /Users/ag043858/temp/bookstore-api/app/controllers/users_controller.rb:18)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'tom-bob-3@gmail.com' LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO `users` (`name`, `email`, `password_digest`, `created_at`, `updated_at`) VALUES ('general user', 'tom-bob-3@gmail.com', '$2a$12$aAVX5ngUCrc4ntSb5yLftuAUUO4usQi7LocdsJPizE1pV5TK5FV6C', '2022-06-05 20:37:52.237198', '2022-06-05 20:37:52.237198')[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-3@gmail.com' LIMIT 1[0m
  ↳ app/auth/authenticate_user.rb:19:in `user'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tom-bob-3@gmail.com' LIMIT 1[0m  [["email", "tom-bob-3@gmail.com"], ["LIMIT", 1]]
  ↳ app/auth/authenticate_user.rb:19:in `user'
Completed 201 Created in 744ms (Views: 0.1ms | ActiveRecord: 1.4ms | Allocations: 5010)


Started DELETE "/users/5" for ::1 at 2022-06-05 15:37:57 -0500
Processing by UsersController#destroy as */*
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  ↳ app/auth/authorize_api_request.rb:21:in `user'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 5 LIMIT 1[0m
  ↳ app/controllers/users_controller.rb:34:in `find_user'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM `users` WHERE `users`.`id` = 5[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/users_controller.rb:26:in `destroy'
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 3318)


